{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents-HDD\\\\ELRProject\\\\elrproj-repo\\\\ess-locker-registration\\\\elr-project-frontend\\\\src\\\\components\\\\pages\\\\report.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nameValue: '',\n      emailValue: '',\n      lockerValue: '',\n      lockerOpt: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  getLockerOpts() {\n    // Fetch the available locker numbers from the API\n    fetch('/lockersapi/available', {\n      method: 'get',\n      mode: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      // If the request succeded, parse the JSON data.\n      // Otherwise show an empty list\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        console.log('Lockers req failed (Code ' + res.status + ')');\n        return [];\n      }\n    }).then(json => this.setState({\n      lockerOpt: json\n    }));\n  }\n\n  componentWillMount() {\n    this.getLockerOpts();\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(event) {\n    // Send a request to the API to create a new locker\n    fetch('/lockersapi/new', {\n      method: 'post',\n      mode: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: this.state.nameValue,\n        email: this.state.emailValue,\n        locker: this.state.lockerValue\n      })\n    }).then(res => {\n      // If the request succeeded, show the thank you page.\n      // Otherwise show the error\n      if (res.status === 200) {\n        this.props.history.push('/register/thankyou');\n      } else if (res.status >= 500) {\n        alert('An internal server error occurred, please try again later or contact the maintanter.');\n      } else {\n        res.text().then(text => alert(text));\n      }\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"display-4\",\n        style: {\n          marginTop: 30\n        },\n        children: \"Report an Empty Locker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 88\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"post\",\n        onSubmit: this.handleSubmit,\n        style: {\n          maxWidth: '40%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          style: {\n            maxWidth: '40%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"buildingDrop\",\n            children: \"Choose building\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"buildingDrop\",\n            className: \"form-control\",\n            name: \"buildingValue\",\n            value: this.state.lockerValue,\n            onChange: this.handleChange,\n            children: [this.state.lockerOpt.map(value => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                children: value.number\n              }, value.number, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 24\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              enabled: true,\n              children: \"Choose Building\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"CSCU\",\n              enabled: true,\n              children: \"CSCU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ESS\",\n              enabled: true,\n              children: \"ELW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          style: {\n            maxWidth: '40%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"inputLocker\",\n            children: \"Enter Locker Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"lockerValue\",\n            id: \"inputLocker\",\n            placeholder: \"Number\",\n            className: \"form-control\",\n            value: this.state.emailValue,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Report;","map":{"version":3,"sources":["D:/Documents-HDD/ELRProject/elrproj-repo/ess-locker-registration/elr-project-frontend/src/components/pages/report.js"],"names":["React","Component","Report","constructor","props","state","nameValue","emailValue","lockerValue","lockerOpt","handleChange","bind","handleSubmit","getLockerOpts","fetch","method","mode","headers","then","res","status","json","console","log","setState","componentWillMount","event","target","value","name","body","JSON","stringify","email","locker","history","push","alert","text","preventDefault","render","marginTop","maxWidth","map","number"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Report extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nameValue: '',\r\n      emailValue: '',\r\n      lockerValue: '',\r\n      lockerOpt: [],\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  getLockerOpts() {\r\n    // Fetch the available locker numbers from the API\r\n    fetch('/lockersapi/available', {\r\n      method: 'get',\r\n      mode: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(res => {\r\n        // If the request succeded, parse the JSON data.\r\n        // Otherwise show an empty list\r\n        if (res.status === 200) {\r\n          return res.json();\r\n        } else {\r\n          console.log('Lockers req failed (Code ' + res.status + ')');\r\n          return [];\r\n        }\r\n      })\r\n      .then(json => this.setState({ lockerOpt: json }));\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getLockerOpts();\r\n  }\r\n\r\n  handleChange(event) {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    // Send a request to the API to create a new locker\r\n    fetch('/lockersapi/new', {\r\n      method: 'post',\r\n      mode: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: this.state.nameValue,\r\n        email: this.state.emailValue,\r\n        locker: this.state.lockerValue,\r\n      }),\r\n    })\r\n      .then(res => {\r\n        // If the request succeeded, show the thank you page.\r\n        // Otherwise show the error\r\n        if (res.status === 200) {\r\n          this.props.history.push('/register/thankyou');\r\n        } else if (res.status >= 500) {\r\n          alert(\r\n            'An internal server error occurred, please try again later or contact the maintanter.'\r\n          );\r\n        } else {\r\n          res.text().then(text => alert(text));\r\n        }\r\n      });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <h1 className=\"display-4\" style = {{marginTop:30}}>Report an Empty Locker</h1> <br/>\r\n\r\n        <form method=\"post\" onSubmit={this.handleSubmit} style={{ maxWidth: '40%'}}>\r\n\r\n          <div className=\"form-group\" style={{ maxWidth: '40%' }}>\r\n            <label htmlFor=\"buildingDrop\">Choose building</label>\r\n            <select id=\"buildingDrop\" className=\"form-control\" name=\"buildingValue\"\r\n              value={this.state.lockerValue} onChange={this.handleChange}>\r\n              {this.state.lockerOpt.map(value => {\r\n                return <option key={value.number}>{value.number}</option>;\r\n              })}\r\n              <option value=\"\" enabled>Choose Building</option>\r\n              <option value=\"CSCU\" enabled>CSCU</option>\r\n              <option value=\"ESS\" enabled>ELW</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\" style={{ maxWidth: '40%' }}>\r\n            <label htmlFor=\"inputLocker\">Enter Locker Number</label>\r\n            <input type=\"number\" name=\"lockerValue\" id=\"inputLocker\" placeholder=\"Number\"\r\n              className=\"form-control\" value={this.state.emailValue} onChange={this.handleChange}\r\n            />\r\n          </div>\r\n          <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Report;\r\n"]},"metadata":{},"sourceType":"module"}