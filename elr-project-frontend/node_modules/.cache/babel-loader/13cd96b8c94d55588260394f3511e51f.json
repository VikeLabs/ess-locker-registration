{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents-HDD\\\\ELRProject\\\\elrproj-repo\\\\ess-locker-registration\\\\elr-project-frontend\\\\src\\\\components\\\\pages\\\\admin.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Admin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nameValue: '',\n      emailValue: '',\n      lockerValue: '',\n      lockerOpt: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  getLockerOpts() {\n    // Fetch the available locker numbers from the API\n    fetch('/lockersapi/available', {\n      method: 'get',\n      mode: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      // If the request succeded, parse the JSON data.\n      // Otherwise show an empty list\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        console.log('Lockers req failed (Code ' + res.status + ')');\n        return [];\n      }\n    }).then(json => this.setState({\n      lockerOpt: json\n    }));\n  }\n\n  componentWillMount() {\n    this.getLockerOpts();\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(event) {\n    // Send a request to the API to create a new locker\n    fetch('/lockersapi/new', {\n      method: 'post',\n      mode: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: this.state.nameValue,\n        email: this.state.emailValue,\n        locker: this.state.lockerValue\n      })\n    }).then(res => {\n      // If the request succeeded, show the thank you page.\n      // Otherwise show the error\n      if (res.status === 200) {\n        this.props.history.push('/register/thankyou');\n      } else if (res.status >= 500) {\n        alert('An internal server error occurred, please try again later or contact the maintanter.');\n      } else {\n        res.text().then(text => alert(text));\n      }\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"display-4\",\n          style: {\n            marginTop: 30\n          },\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 71\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Can add what/how many lockers are available/unavailable here.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 78\n          }, this), \"Available: %n \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 31\n          }, this), \"Unavailable: %n \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-lg\",\n            children: \"Download CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Admin;","map":{"version":3,"sources":["D:/Documents-HDD/ELRProject/elrproj-repo/ess-locker-registration/elr-project-frontend/src/components/pages/admin.js"],"names":["React","Component","Link","Admin","constructor","props","state","nameValue","emailValue","lockerValue","lockerOpt","handleChange","bind","handleSubmit","getLockerOpts","fetch","method","mode","headers","then","res","status","json","console","log","setState","componentWillMount","event","target","value","name","body","JSON","stringify","email","locker","history","push","alert","text","preventDefault","render","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Admin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nameValue: '',\r\n      emailValue: '',\r\n      lockerValue: '',\r\n      lockerOpt: [],\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  getLockerOpts() {\r\n    // Fetch the available locker numbers from the API\r\n    fetch('/lockersapi/available', {\r\n      method: 'get',\r\n      mode: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(res => {\r\n        // If the request succeded, parse the JSON data.\r\n        // Otherwise show an empty list\r\n        if (res.status === 200) {\r\n          return res.json();\r\n        } else {\r\n          console.log('Lockers req failed (Code ' + res.status + ')');\r\n          return [];\r\n        }\r\n      })\r\n      .then(json => this.setState({ lockerOpt: json }));\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getLockerOpts();\r\n  }\r\n\r\n  handleChange(event) {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    // Send a request to the API to create a new locker\r\n    fetch('/lockersapi/new', {\r\n      method: 'post',\r\n      mode: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name: this.state.nameValue,\r\n        email: this.state.emailValue,\r\n        locker: this.state.lockerValue,\r\n      }),\r\n    })\r\n      .then(res => {\r\n        // If the request succeeded, show the thank you page.\r\n        // Otherwise show the error\r\n        if (res.status === 200) {\r\n          this.props.history.push('/register/thankyou');\r\n        } else if (res.status >= 500) {\r\n          alert(\r\n            'An internal server error occurred, please try again later or contact the maintanter.'\r\n          );\r\n        } else {\r\n          res.text().then(text => alert(text));\r\n        }\r\n      });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div>\r\n        <div className=\"container\">\r\n        <h1 className=\"display-4\" style = {{marginTop:30}}>Admin</h1> <br/>\r\n\r\n            <p>\r\n                Can add what/how many lockers are available/unavailable here.<br/>\r\n                Available: %n <br/>\r\n                Unavailable: %n <br/>\r\n            </p><br/>\r\n\r\n            <Link to=\"/\">\r\n              <button className=\"btn btn-primary btn-lg\">\r\n                Download CSV\r\n              </button>\r\n            </Link>\r\n\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;\r\n"]},"metadata":{},"sourceType":"module"}